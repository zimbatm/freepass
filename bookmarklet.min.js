(function(e){function v(){if(!(q&&(!f||!f.closed))){q=null;f=e.open(w,C)}}function j(){typeof e.console!=="undefined"&&console.log.apply(console.log,arguments)}function l(a,b){for(k in b)if(b.hasOwnProperty(k))a[k]=b[k]}function r(a){a.stopPropagation();a.preventDefault()}function D(a,b,s){function m(){s.apply(this,arguments);a[n](b,m,false)}a[g](b,m,false)}function E(a){function b(i){r(i);c.style.left=i.clientX-s+"px";c.style.top=i.clientY-m+"px"}var s=a.clientX-c.offsetLeft,m=a.clientY-c.offsetTop;
r(a);if(f){D(d,"mouseup",function(i){b(i);d[n]("mousemove",b,false)});d[g]("mousemove",b,false)}else v()}function F(a){r(a);e[n]("message",x,false);if(t){d[n]("dblclick",y,true);z()}f&&f.close();d.body.removeChild(c)}function y(a){a=a.target;var b;if(a.nodeName.toLowerCase()==="input"&&a.type==="password"){a:{for(b=0;b<o.length;b++)if(o[b].a===a){b=true;break a}b=false}if(!b){b=a.style.cssText;l(a.style,{backgroundColor:A});a.value=u;o.push({a:a,b:b})}}}function z(){for(var a;a=o.pop();)a.a.style.cssText=
a.b}function x(a){j("gotev",a,B);if(a.origin===B)if(a.data==="hello"){a.source.postMessage("world",a.origin);j("Handshake done, waiting for password");q=a.source}else{a=JSON.parse(a.data);if(a.hasOwnProperty("password")){u=a.password;j("Got password",u);c.style.backgroundColor=A;if(t)z();else{d[g]("dblclick",y,true);t=true}}else j("why ??? (bug)",a)}}var d=e.document,w="<?php echo $base_url; ?>",B="<?php echo $base_domain; ?>",C="fp<?php echo sha1(time()+1); ?>",A="#ddffdd",g="addEventListener",n=
"removeEventListener",o=[],t=false,f,q,c,p,h,u;if(!e||!e.document)e.location=w;else if(!document.getElementById("fp<?php echo sha1(time()); ?>")){c=d.createElement("div");c.id="fp<?php echo sha1(time()); ?>";l(c.style,{padding:0,margin:0,border:"1px solid #aaaaaa",font:"normal 12px",fontFamily:"Trebuchet MS, Helvetica, Arial, sans-serif",textAlign:"right",position:"fixed",top:"10px",left:"10px",color:"#333333",background:"#99aabb",zIndex:"1000000"});c[g]("mousedown",E,false);p=d.createElement("span");
l(p.style,{marginLeft:"2em",marginRight:"2em"});p.innerHTML="FreePass";h=d.createElement("input");l(h.style,{margin:0,padding:0,border:0,color:"inherit",background:"inherit",font:"inherit",borderRight:"1px solid #aaaaaa"});h.type="button";h.value="x";h[g]("click",F,false);c.appendChild(h);c.appendChild(p);d.body.appendChild(c);e[g]("message",x,false);v()}})(this);
